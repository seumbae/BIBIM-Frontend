import styled from "styled-components";
import {
	Bar,
	XAxis,
	YAxis,
	BarChart,
	Cell,
	Tooltip,
	ResponsiveContainer,
} from "recharts";
import { useEffect } from "react";
import { useState } from "react";

const VulnerabilityHeader = styled.div`
	margin-left: 3.5rem;
	font-size: 0.9rem;
	font-weight: 600;
`;

const VulnerabilityBarGraph = ({ item }) => {
	const [data, setDate] = useState([
		{
			name: "SIS",
			cnt: 0,
		},
		{
			name: "SAST",
			cnt: 0,
		},
		{
			name: "DAST",
			cnt: 0,
		},
		{
			name: "SCA",
			cnt: 0,
		},
	]);
	const COLORS = "#4a4a4a";

	useEffect(() => {
		item.map((res) => {
			data.map((item) => {
				if (item.name === res._id) item.cnt = res.count;
			});
		});
	}, [item]);

	return (
		<>
			<ResponsiveContainer>
				<BarChart
					layout="vertical"
					data={data}
					margin={{
						right: 20,
						bottom: 20,
					}}
				>
					<XAxis type="number" hide />
					<YAxis
						dataKey="name"
						type="category"
						scale="auto"
						tickLine={false}
						axisLine={false}
					/>
					<Bar
						dataKey="cnt"
						barSize={25}
						label={{ position: "right", fill: "#000000", fontSize: "0.8rem" }}
						isAnimationActive={false}
					>
						{data.map((entry, index) => (
							<Cell key={`cell-${index}`} fill={COLORS} />
						))}
					</Bar>
					<Tooltip cursor={false} />
				</BarChart>
			</ResponsiveContainer>
		</>
	);
};

export default VulnerabilityBarGraph;
