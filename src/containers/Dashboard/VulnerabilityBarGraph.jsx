import styled from "styled-components";
import {
	Bar,
	XAxis,
	YAxis,
	BarChart,
	Cell,
	Tooltip,
	ResponsiveContainer,
	LabelList,
} from "recharts";

const VulnerabilityHeader = styled.div`
	margin-left: 3.5rem;
	font-size: 0.9rem;
	font-weight: 600;
`

const VulnerabilityBarGraph = ({item}) => {
	const data = [
		{
			name: "Critical",
			cnt: item.Critical,
		},
		{
			name: "Major",
			cnt: item.Major,
		},
		{
			name: "Minor",
			cnt: item.Minor,
		},
		{
			name: "Info",
			cnt: item.Info,
		},
		{
			name: "None",
			cnt: item.None,
		},
	];
	const COLORS = ["#FF0000", "#F58737", "#F5C037", "#00AA00", "#4a4a4a"];
	const total = data.reduce((acc, cur) => acc + cur.cnt, 0);
	return (
		<>
		<VulnerabilityHeader>Total Vulnerabilities {total}</VulnerabilityHeader>
		<ResponsiveContainer>
			<BarChart
				layout="vertical"
				data={data}
				margin={{
					right: 20,
					bottom: 20,
				}}
			>
				<XAxis type="number" hide />
				<YAxis
					dataKey="name"
					type="category"
					scale="auto"
					tickLine={false}
					axisLine={false}
				/>
				<Bar
					dataKey="cnt"
					barSize={25}
					label={{ position: "right", fill: "#000000", fontSize: "0.8rem"}}
					isAnimationActive={false}
				>
					{data.map((entry, index) => (
						<Cell key={`cell-${index}`} fill={COLORS[index]} />
					))}
				</Bar>
				<Tooltip cursor={false} />
			</BarChart>
		</ResponsiveContainer>
		</>
	);
};

export default VulnerabilityBarGraph;
